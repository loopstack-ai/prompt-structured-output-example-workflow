title: "Structured Output Example (Hello World Script)"

description: An example workflow that demonstrates how to generate a structured output in Loopstack on the example of creating a "Hello, World!" script in a specified programming language.

ui:
  form:
    properties:
      language:
        title: 'What programming language should the script be in?'
        widget: select

transitions:
  - id: greeting
    from: start
    to: ready
    call:
      - tool: createDocument
        args:
          id: status
          document: aiMessageDocument
          update:
            content:
              role: assistant
              parts:
                - type: text
                  text: Creating a 'Hello, World!' script in {{ args.language }}...

  - id: prompt
    from: ready
    to: prompt_executed
    call:
      - tool: aiGenerateDocument
        args:
          llm:
            provider: openai
            model: gpt-4o
          responseDocument: fileDocument
          prompt: |
            Create a {{ args.language }} script that prints 'Hello, World!' to the console.
            Wrap the code in triple-backticks.
        assign:
          file: ${ result.data.content }

  - id: add_message
    from: prompt_executed
    to: end
    call:
      - tool: createDocument
        args:
          id: status
          document: aiMessageDocument
          update:
            content:
              role: assistant
              parts:
                - type: text
                  text: |
                    Successfully generated: {{ file.description }}
